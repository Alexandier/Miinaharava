<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <link rel="stylesheet" type="text/css" href="helppo2.css">
        <meta charset="utf-15">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <link rel="icon" href="https://us.123rf.com/450wm/asmati/asmati1606/asmati160600293/57507948-bomb-sign-illustration-white-icon-on-red-background-.jpg?ver=6">

        <title>MIINAHARAVA</title>
    </head>
    <body>
        <a href="https://miinaharava.000webhostapp.com/">< valikko </a>
        <h2>MIINAHARAVA</h2>
        <div class="alue">
        </div>
        <div class="raja">
            <div class="miinat">
            </div>
            <input type="checkbox"><h1>| merkkaa pommi: </h1></input>
            <h3 class="viiva">|</h3>
            <button><img class="moi" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQzzEPZz2nL6umGeRzGB4ly_4ITSDtj5rD-iQ2xfUfpBf6EVkIesQ"></img></button>
        </div>
        <script>
        $(document).ready(function(){
				window.onload = function() {
  var context = new AudioContext();
}
            screen.orientation.lock('landscape');
            $('body').css({'background-color':'rgb(' + Math.floor(Math.random()*255) + ',' + Math.floor(Math.random()*255) + ',' + Math.floor(Math.random()*255) + ')'});

            var lista = [];
            var b = 0;
            var g = 0;
            var s = 0;

            for (i = 0; i < 16*16; i++) {
                lista.push(0);
            }
            for (i = 0; i < 16*16; i++) {
                $('.alue').append('<div class="ruutu" id="' + i + '"></div>');
                if (Math.floor(Math.random()*10) < 2) {
                    $('#' + i).append('<p id="bomb' + i + '">B</p>');
                    if (i % 16 == 15) {
                        lista[i-1] += 1;
                        lista[i-16] += 1;
                        lista[i-17] += 1;
                        lista[i+16] += 1;
                        lista[i+15] += 1;
                        b += 1;
                    } else if (i % 16 == 0) {
                        lista[i+1] += 1;
                        lista[i+16] += 1;
                        lista[i+17] += 1;
                        lista[i-16] += 1;
                        lista[i-15] += 1;
                        b += 1;
                    } else {
                        lista[i+1] += 1;
                        lista[i-1] += 1;
                        lista[i-16] += 1;
                        lista[i-15] += 1;
                        lista[i-17] += 1;
                        lista[i+16] += 1;
                        lista[i+15] += 1;
                        lista[i+17] += 1;
                        b += 1;
                    }
                    s = b;
                }
            }
            for (i = 0; i < 16*16; i++) {
                $('.miinat').append('<p class="joku">pommeja jäljellä: ' + b + '</p>');
                if ($('#' + i).text() != 'B') {
                    if (lista[i] == 0) {
                        lista[i] = ' ';
                    }
                    $('#' + i).append('<p>' + lista[i] + '</p>');
                }
                $('#' + i).click(function() {
                    if ($('input').prop('checked') == false) {
                        if ($(this).text() == 'B') {
													$(this).css({'color':'black'});

												for (i = 0; i < 16*16; i++) {
							$('#bomb' + i).append('<img class="pom" src="https://us.123rf.com/450wm/asmati/asmati1606/asmati160600293/57507948-bomb-sign-illustration-white-icon-on-red-background-.jpg?ver=6" height="17" width="17"></img>');
							}
                            $('.alue').css({'background-color':'red'});
                            $('.alue').append('<h1 class="häviö">HÄVISIT</h1>');

							$('body').append('<img id="gif1" src="https://i.redd.it/ywmz4t65uwm11.png"></img>');
							setInterval(function(){
							$('#gif1').remove();
                            },2000);
                            setInterval(function(){
                                location.reload();
                            },5000);
                        } else {
                            if($(this).css("background-color")!="rgb(0, 128, 0)") {
						    if($(this).css("background-color")!="rgb(0, 0, 255)") {
                            $(this).css({'background-color':'rgb(0, 128, 0)'});
														$(this).css({'color':'black'});

                            if($(this).text() == 0) {
                                if($(this).attr('id') % 16 == 15) {
                                $('#' + ($(this).attr('id')-1)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + ($(this).attr('id')-16)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + ($(this).attr('id')-17)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + (Number($(this).attr('id'))+16)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + (Number($(this).attr('id'))+15)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                            }
                                else if($(this).attr('id') % 16 == 0) {
                                $('#' + (Number($(this).attr('id'))+1)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + (Number($(this).attr('id'))+16)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + (Number($(this).attr('id'))+17)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + ($(this).attr('id')-16)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + ($(this).attr('id')-15)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                            }
                                else {
                                $('#' + ($(this).attr('id')-1)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + ($(this).attr('id')-16)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + ($(this).attr('id')-17)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + (Number($(this).attr('id'))+16)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + (Number($(this).attr('id'))+15)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + (Number($(this).attr('id'))+17)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + ($(this).attr('id')-15)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                                $('#' + (Number($(this).attr('id'))+1)).css({'background-color':'rgb(0, 128, 0)','color':'black'});
                            }
                            for (i = 0; i <16*16; i++) {
                                if($('#' + i).css('background-color') == 'rgb(0, 128, 0)') {
                                    g += 1;
                                }
                            }
                            if (g == 16*16-s && b == 0) {
                                $('.alue').append('<h1 class="voitto">VOITIT</h1>');
                            } else {
                                g = 0;
                            }
							}
                        }
}
                        }
                    } else {
                        if($(this).css("background-color")!="rgb(0, 0, 255)") {
                            if($(this).css("background-color")!="rgb(0, 128, 0)") {
                            $(this).css({'background-color':'blue','color':'blue'});
                            b -= 1;
                            for (i = 0; i < 16*16; i++) {
                                if($('#' + i).css('background-color') == 'rgb(0, 128, 0)') {
                                    g += 1;
                                }
                            }
                            if (g == 16*16-s && b == 0) {
                                $('.alue').append('<h1 class="voitto">VOITIT</h1>');
                            } else {
                                g = 0;
                            }
                            $('.joku').remove();
                            $('.miinat').append('<p class="joku">pommeja jäljellä: ' + b + '</p>');
                        }
                        } else {
                            $(this).css({'background-color':'white','color':'white'});
                            b += 1;
                            $('.joku').remove();
                            $('.miinat').append('<p class="joku">pommeja jäljellä: ' + b + '</p>');
                        }
                    }
                });
            }
            $('button').click(function(){
                location.reload();
            });

        });
        </script>
    </body>
</html>
